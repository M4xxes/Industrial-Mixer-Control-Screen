import sqlite3 from 'sqlite3';
import { promisify } from 'util';
import fs from 'fs';

const db = new sqlite3.Database('./database.sqlite');
const run = promisify(db.run.bind(db));

async function seedDefautsCatalogue() {
  try {
    console.log('Insertion complète du catalogue de défauts...');

    // Toutes les données du catalogue de défauts
    const defauts = [
      [1,'MB12','DRKBR1NOR','MB1 Défaut Retour Contacteur Bras Sens Normal',3],
      [2,'MB12','DRKBR1INV','MB1 Défaut Retour Contacteur Bras Sens Inverse',3],
      [3,'MB12','DRKVI1MAL','MB1 Défaut Retour Contacteur Vis Sens Malaxage',3],
      [4,'MB12','DRKVI1EXT','MB1 Défaut Retour Contacteur Vis Sens Extrusion',3],
      [5,'MB12','DVIDMB1','MB1 Défaut Mise au Vide Malaxeur',2],
      [6,'MB12','DISLBR1','MB1 Défaut Intensité Basse Moteur Bras',1],
      [7,'MB12','DISLVI1','MB1 Défaut Intensité Basse Moteur Vis',1],
      [8,'MB12','DATTREP1','MB1 Défaut Attente Reprise Malaxage',1],
      [9,'MB12','DRKBR2NOR','MB2 Défaut Retour Contacteur Bras Sens Normal',3],
      [10,'MB12','DRKBR2INV','MB2 Défaut Retour Contacteur Bras Sens Inverse',3],
      [11,'MB12','DRKVI2MAL','MB2 Défaut Retour Contacteur Vis Sens Malaxage',3],
      [12,'MB12','DRKVI2EXT','MB2 Défaut Retour Contacteur Vis Sens Extrusion',3],
      [13,'MB12','DVIDMB2','MB2 Défaut Mise au Vide Malaxeur',2],
      [14,'MB12','DISLBR2','MB2 Défaut Intensité Basse Moteur Bras',1],
      [15,'MB12','DISLVI2','MB2 Défaut Intensité Basse Moteur Vis',1],
      [16,'MB12','DATTREP2','MB2 Défaut Attente Reprise Malaxage',1],
      [17,'MB35','DRKBR3NOR','MB3 Défaut Retour Contacteur Bras Sens Normal',3],
      [18,'MB35','DRKBR3INV','MB3 Défaut Retour Contacteur Bras Sens Inverse',3],
      [19,'MB35','DRKVI3MAL','MB3 Défaut Retour Contacteur Vis Sens Malaxage',3],
      [20,'MB35','DRKVI3EXT','MB3 Défaut Retour Contacteur Vis Sens Extrusion',3],
      [21,'MB35','DVIDMB3','MB3 Défaut Mise au Vide Malaxeur',2],
      [22,'MB35','DISLBR3','MB3 Défaut Intensité Basse Moteur Bras',1],
      [23,'MB35','DISLVI3','MB3 Défaut Intensité Basse Moteur Vis',1],
      [24,'MB35','DATTREP3','MB3 Défaut Attente Reprise Malaxage',1],
      [25,'MB35','DRKBR5NOR','MB5 Défaut Retour Contacteur Bras Sens Normal',3],
      [26,'MB35','DRKBR5INV','MB5 Défaut Retour Contacteur Bras Sens Inverse',3],
      [27,'MB35','DRKVI5MAL','MB5 Défaut Retour Contacteur Vis Sens Malaxage',3],
      [28,'MB35','DRKVI5EXT','MB5 Défaut Retour Contacteur Vis Sens Extrusion',3],
      [29,'MB35','DVIDMB5','MB5 Défaut Mise au Vide Malaxeur',2],
      [30,'MB35','DISLBR5','MB5 Défaut Intensité Basse Moteur Bras',1],
      [31,'MB35','DISLVI5','MB5 Défaut Intensité Basse Moteur Vis',1],
      [32,'MB35','DATTREP5','MB5 Défaut Attente Reprise Malaxage',1],
      [33,'MB67','DRKBR6NOR','MB6 Défaut Retour Contacteur Bras Sens Normal',3],
      [34,'MB67','DRKBR6INV','MB6 Défaut Retour Contacteur Bras Sens Inverse',3],
      [35,'MB67','DRKVI6MAL','MB6 Défaut Retour Contacteur Vis Sens Malaxage',3],
      [36,'MB67','DRKVI6EXT','MB6 Défaut Retour Contacteur Vis Sens Extrusion',3],
      [37,'MB67','DVIDMB6','MB6 Défaut Mise au Vide Malaxeur',2],
      [38,'MB67','DISLBR6','MB6 Défaut Intensité Basse Moteur Bras',1],
      [39,'MB67','DISLVI6','MB6 Défaut Intensité Basse Moteur Vis',1],
      [40,'MB67','DATTREP6','MB6 Défaut Attente Reprise Malaxage',1],
      [41,'MB67','DRKBR7NOR','MB7 Défaut Retour Contacteur Bras Sens Normal',3],
      [42,'MB67','DRKBR7INV','MB7 Défaut Retour Contacteur Bras Sens Inverse',3],
      [43,'MB67','DRKVI7MAL','MB7 Défaut Retour Contacteur Vis Sens Malaxage',3],
      [44,'MB67','DRKVI7EXT','MB7 Défaut Retour Contacteur Vis Sens Extrusion',3],
      [45,'MB67','DVIDMB7','MB7 Défaut Mise au Vide Malaxeur',2],
      [46,'MB67','DISLBR7','MB7 Défaut Intensité Basse Moteur Bras',1],
      [47,'MB67','DISLVI7','MB7 Défaut Intensité Basse Moteur Vis',1],
      [48,'MB67','DATTREP7','MB7 Défaut Attente Reprise Malaxage',1],
      [49,'Liquide','MB1DFHUI','MB1 Défaut FdC Vanne Dosage Huile',2],
      [50,'Liquide','MB2DFHUI','MB2 Défaut FdC Vanne Dosage Huile',2],
      [51,'Liquide','B12DFRMP','B12 Défaut FdC Remplissage D10',2],
      [52,'Liquide','MB1DFD10','MB1 Défaut FdC Vanne Dosage D10',2],
      [53,'Liquide','MB2DFD10','MB2 Défaut FdC Vanne Dosage D10',2],
      [54,'Liquide','B12DFHUI','B12 Défaut Débit Huile',2],
      [55,'Liquide','B12DFD10','B12 Défaut Remplissage D10',2],
      [56,'Liquide','B12DFEXT','B12 Défaut Extraction D10',2],
      [57,'Liquide','B12DFSUR','B12 Défaut Surcharge Bascule D10',2],
      [58,'Liquide','DTOLD10MB1','MB1 Défaut Hors Tolérance Moins D10',2],
      [59,'Liquide','DTOLD10MB2','MB2 Défaut Hors Tolérance Moins D10',2],
      [60,'Liquide','DTOLD200MB1','MB1 Défaut Hors Tolérance Moins D200',2],
      [61,'Liquide','DTOLD200MB2','MB2 Défaut Hors Tolérance Moins D200',2],
      [62,'Liquide','DB12POID10','B12 Défaut Mesure Poids Bascule D10',2],
      [63,'Liquide','DB12POID200','B12 Défaut Mesure Poids Bascule D200',2],
      [64,'Liquide','B12DFRMP_D200','B12 Défaut FdC Remplissage D200',2],
      [65,'Liquide','MB1DFD200','MB1 Défaut FdC Vanne Dosage D200',2],
      [66,'Liquide','MB2DFD200','MB2 Défaut FdC Vanne Dosage D200',2],
      [67,'Liquide','B12DFD200','B12 Défaut Remplissage D200',2],
      [68,'Liquide','B12DFEXT_D200','B12 Défaut Extraction D200',2],
      [69,'Liquide','B12DFSUR_D200','B12 Défaut Surcharge Bascule D200',2],
      [70,'Liquide','B12DFISO_D200','B12 Défaut FdC Vanne Isolement D200',2],
      [71,'Liquide','B12TSH_D200','B12 Défaut Température Haute D200',2],
      [72,'Liquide','B12TAL_D200','B12 Alarme Température Basse D200',2],
      [73,'Liquide','B12TSD_D200','B12 Défaut Capteur Température D200',2],
      [74,'Liquide','B12DFPOSD10C1','B12 Défaut Position Vanne Stockage D10 Cuve 1',2],
      [75,'Liquide','B12DFPOSD10C2','B12 Défaut Position Vanne Stockage D10 Cuve 2',2],
      [76,'Liquide','B12DFFERD10','B12 Défaut Aucune Vanne Ouverte Cuves Stockage D10',2],
      [77,'Liquide','B12DFOUVD10','B12 Défaut Toutes Vannes Ouvertes Cuves Stockage D10',2],
      [78,'Liquide','B12DFNIVD10C1','B12 Défaut Niveau Bas Stockage D10 Cuve 1',2],
      [79,'Liquide','B12DFNIVD10C2','B12 Défaut Niveau Bas Stockage D10 Cuve 2',2],
      [80,'Liquide','B12DFNIVD200','B12 Défaut Niveau Bas Stockage D200',2],
      [81,'Liquide','B12DFNIVHUI','B12 Défaut Niveau Bas Stockage Huile Minérale',2],
      [82,'Liquide','MB3DFHUI','MB3  Défaut FdC Vanne Dosage Huile',2],
      [83,'Liquide','MB5DFHUI','MB5 Défaut FdC Vanne Dosage Huile',2],
      [84,'Liquide','B35DFRMP','B35 Défaut FdC Vanne Remplissage D10',2],
      [85,'Liquide','MB3DFD10','MB3 Défaut FdC Vanne Dosage D10',2],
      [86,'Liquide','MB5DFD10','MB5 Défaut FdC Vanne Dosage D10',2],
      [87,'Liquide','B35DFHUI','B35 Défaut Débit Huile',2],
      [88,'Liquide','B35DFD10','B35 Défaut Remplissage D10',2],
      [89,'Liquide','B35DFEXT','B35 Défaut Extraction D10',2],
      [90,'Liquide','B35DFSUR','B35 Défaut Surcharge Bascule D10',2],
      [91,'Liquide','DTOLD10MB3','MB3 Défaut Hors Tolérance Moins D10',2],
      [92,'Liquide','DTOLD10MB5','MB5 Défaut Hors Tolérance Moins D10',2],
      [93,'Liquide','DTOLD200MB5','MB5 Défaut Hors Tolérance Moins D200',2],
      [94,'Liquide','DB35POID10','B35 Défaut Mesure Poids Bascule D10',2],
      [95,'Liquide','DB35POID200','B35 Défaut Mesure Poids Bascule D200',2],
      [96,'Liquide','B35DFRMP_D200','B35 Défaut FdC Remplissage D200',2],
      [97,'Liquide','MB3DFD200','MB3 Défaut FdC Vanne Dosage D200',2],
      [98,'Liquide','MB5DFD200','MB5 Défaut FdC Vanne Dosage D200',2],
      [99,'Liquide','B35DFD200','B35 Défaut Remplissage D200',2],
      [100,'Liquide','B35DFEXT_D200','B35 Défaut Extraction D200',2],
      [101,'Liquide','B35DFSUR_D200','B35 Défaut Surcharge Bascule D200',2],
      [102,'Liquide','B35DFISO_D200','B35 Défaut FdC Vanne Isolement D200',2],
      [103,'Liquide','B35TSH_D200','B35 Défaut Température Haute D200',2],
      [104,'Liquide','B35TAL_D200','B35 Alarme Température Basse D200',2],
      [105,'Liquide','B35TSD_D200','B35 Défaut Capteur Température D200',2],
      [106,'Liquide','MB6DFHUI','MB6 Défaut FdC Vanne Dosage Huile',2],
      [107,'Liquide','MB7DFHUI','MB7 Défaut FdC Vanne Dosage Huile',2],
      [108,'Liquide','B67DFRMP','B67 Défaut FdC Remplissage D10',2],
      [109,'Liquide','MB6DFD10','MB6 Défaut FdC Vanne Dosage D10',2],
      [110,'Liquide','MB7DFD10','MB7 Défaut FdC Vanne Dosage D10',2],
      [111,'Liquide','B67DFHUI','B67 Défaut Débit Huile',2],
      [112,'Liquide','B67DFD10','B67 Défaut Remplissage D10',2],
      [113,'Liquide','B67DFEXT','B67 Défaut Extraction D10',2],
      [114,'Liquide','B67DFSUR','B67 Défaut Surcharge Bascule D10',2],
      [115,'Liquide','DTOLD10MB6','MB6 Défaut Hors Tolérance Moins D10',2],
      [116,'Liquide','DTOLD10MB7','MB7 Défaut Hors Tolérance Moins D10',2],
      [117,'Liquide','DTOLD200MB6','MB6 Défaut Hors Tolérance Moins D200',2],
      [118,'Liquide','DTOLD200MB7','MB7 Défaut Hors Tolérance Moins D200',2],
      [119,'Liquide','DB67POID10','B67 Défaut Mesure Poids Bascule D10',2],
      [120,'Liquide','DB67POID200','B67 Défaut Mesure Poids Bascule D200',2],
      [121,'Liquide','B67DFRMP_D200','B67 Défaut FdC Remplissage D200',2],
      [122,'Liquide','MB6DFD200','MB6 Défaut FdC Vanne Dosage D200',2],
      [123,'Liquide','MB7DFD200','MB7 Défaut FdC Vanne Dosage D200',2],
      [124,'Liquide','B67DFD200','B67 Défaut Remplissage D200',2],
      [125,'Liquide','B67DFEXT_D200','B67 Défaut Extraction D200',2],
      [126,'Liquide','B67DFSUR_D200','B67 Défaut Surcharge Bascule D200',2],
      [127,'Liquide','B67DFISO_D200','B67 Défaut FdC Vanne Isolement D200',2],
      [128,'Liquide','B67TSH_D200','B67 Défaut Température Haute D200',2],
      [129,'Liquide','B67TAL_D200','B67 Alarme Température Basse D200',2],
      [130,'Liquide','B67TSD_D200','B67 Défaut Capteur Température D200',2],
      [131,'Liquide','D10C1DFPOS','API Défaut Position Vanne Stockage D10 Cuve 1',2],
      [132,'Liquide','D10C2DFPOS','API Défaut Position Vanne Stockage D10 Cuve 2',2],
      [133,'Liquide','D10DFVFER','API Défaut Aucune Vanne Ouverte Cuves Stockage D10',2],
      [134,'Liquide','D10DFVOUV','API Défaut Toutes Vannes Ouvertes Cuves Stockage D10',2],
      [135,'Liquide','D10C1DFNIV','API Défaut Niveau Bas Stockage D10 Cuve 1',2],
      [136,'Liquide','D10C2DFNIV','API Défaut Niveau Bas Stockage D10 Cuve 2',2],
      [137,'Liquide','D200DFNIV','API Défaut Niveau Bas Stockage D200',2],
      [138,'Liquide','HUIDFNIV','API Défaut Niveau Bas Stockage Huile Minérale',2],
      [139,'Poudre','DOVDMB1','VDMB1 Défaut Ouverture Vanne',2],
      [140,'Poudre','DFVDMB1','VDMB1 Défaut Fermeture Vanne',2],
      [141,'Poudre','DOVDMB2','VDMB2 Défaut Ouverture Vanne',2],
      [142,'Poudre','DFVDMB2','VDMB2 Défaut Fermeture Vanne',2],
      [143,'Poudre','DOVIMB1','VIMB1 Défaut Ouverture Vanne',2],
      [144,'Poudre','DFVIMB1','VIMB1 Défaut Fermeture Vanne',2],
      [145,'Poudre','DOVIMB2','VIMB2 Défaut Ouverture Vanne',2],
      [146,'Poudre','DFVIMB2','VIMB2 Défaut Fermeture Vanne',2],
      [147,'Poudre','DRKMB1','MB1 Défaut Retour Contacteur Vis',3],
      [148,'Poudre','DRKMB2','MB2 Défaut Retour Contacteur Vis',3],
      [149,'Poudre','DB12RMP','B12 Défaut Remplissage Bascule Poudre',2],
      [150,'Poudre','DB12EXT','B12 Défaut Extraction Bascule Poudre',2],
      [151,'Poudre','DB12SUR','B12 Défaut Surcharge Bascule Poudre',2],
      [152,'Poudre','DTOLMB1','MB1 Défaut Tolérance Dosage Poudre',2],
      [153,'Poudre','DTOLMB2','MB2 Défaut Tolérance Dosage Poudre',2],
      [154,'Poudre','DB12POI','B12 Défaut Mesure Poids Bascule Poudre',2],
      [155,'Poudre','DOVDMB3','VDMB3 Défaut Ouverture Vanne',2],
      [156,'Poudre','DFVDMB3','VDMB3 Défaut Fermeture Vanne',2],
      [157,'Poudre','DOVDMB5','VDMB5 Défaut Ouverture Vanne',2],
      [158,'Poudre','DFVDMB5','VDMB5 Défaut Fermeture Vanne',2],
      [159,'Poudre','DOVIMB3','VIMB3 Défaut Ouverture Vanne',2],
      [160,'Poudre','DFVIMB3','VIMB3 Défaut Fermeture Vanne',2],
      [161,'Poudre','DOVIMB5','VIMB5 Défaut Ouverture Vanne',2],
      [162,'Poudre','DFVIMB5','VIMB5 Défaut Fermeture Vanne',2],
      [163,'Poudre','DRKMB3','MB3 Défaut Retour Contacteur Vis',3],
      [164,'Poudre','DRKMB5','MB5 Défaut Retour Contacteur Vis',3],
      [165,'Poudre','DB35RMP','B35 Défaut Remplissage Bascule Poudre',2],
      [166,'Poudre','DB35EXT','B35 Défaut Extraction Bascule Poudre',2],
      [167,'Poudre','DB35SUR','B35 Défaut Surcharge Bascule Poudre',2],
      [168,'Poudre','DTOLMB3','MB3 Défaut Tolérance Dosage Poudre',2],
      [169,'Poudre','DTOLMB5','MB5 Défaut Tolérance Dosage Poudre',2],
      [170,'Poudre','DB35POI','B35 Défaut Mesure Poids Bascule Poudre',2],
      [171,'Poudre','DOVDMB6','VDMB6 Défaut Ouverture Vanne',2],
      [172,'Poudre','DFVDMB6','VDMB6 Défaut Fermeture Vanne',2],
      [173,'Poudre','DOVIMB6','VIMB6 Défaut Ouverture Vanne',2],
      [174,'Poudre','DFVIMB6','VIMB6 Défaut Fermeture Vanne',2],
      [175,'Poudre','DRKMB6','MB6 Défaut Retour Contacteur Vis',3],
      [176,'Poudre','DB67RMP','B6 Défaut Remplissage Bascule Poudre',2],
      [177,'Poudre','DB67EXT','B6 Défaut Extraction Bascule Poudre',2],
      [178,'Poudre','DB67SUR','B6 Défaut Surcharge Bascule Poudre',2],
      [179,'Poudre','DOVDMB7','VDMB7 Défaut Ouverture Vanne',2],
      [180,'Poudre','DFVDMB7','VDMB7 Défaut Fermeture Vanne',2],
      [181,'Poudre','DOVIMB7','VIMB7 Défaut Ouverture Vanne',2],
      [182,'Poudre','DFVIMB7','VIMB7 Défaut Fermeture Vanne',2],
      [183,'Poudre','DRKMB7','MB7 Défaut Retour Contacteur Vis',3],
      [184,'Poudre','DTOLMB6','MB6 Défaut Tolérance Dosage Poudre',2],
      [185,'Poudre','DTOLMB7','MB7 Défaut Tolérance Dosage Poudre',2],
      [186,'Poudre','DB67POI','B67 Défaut Mesure Poids Bascule Poudre',2],
    ];

    for (const defaut of defauts) {
      await run(`
        INSERT OR REPLACE INTO defauts_catalogue 
        (id_defaut, automate, code_defaut, description, priorite, created_at, updated_at)
        VALUES (?, ?, ?, ?, ?, datetime('now'), datetime('now'))
      `, defaut);
    }

    console.log(`${defauts.length} défauts insérés avec succès !`);
  } catch (error) {
    console.error('Erreur lors de l\'insertion:', error);
  } finally {
    db.close();
  }
}

seedDefautsCatalogue();

